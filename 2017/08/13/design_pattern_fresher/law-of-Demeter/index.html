<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Design Pattern," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="11.1 第一天上班 时间: 4月2日19点 &amp;nbsp; 地点: 小菜大鸟住所的客厅 &amp;nbsp; 任务: 小菜, 大鸟  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “回来啦! 怎么样? 第一天上班感受多吧.” 大鸟关关心的问道.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “感受真是多哦!!!” 小菜一脸的不屑.">
<meta name="keywords" content="Design Pattern">
<meta property="og:type" content="article">
<meta property="og:title" content="11. 无数人难办事? - 迪米特法则(LoD)">
<meta property="og:url" content="http://yoursite.com/2017/08/13/design_pattern_fresher/law-of-Demeter/index.html">
<meta property="og:site_name" content="Congspark">
<meta property="og:description" content="11.1 第一天上班 时间: 4月2日19点 &amp;nbsp; 地点: 小菜大鸟住所的客厅 &amp;nbsp; 任务: 小菜, 大鸟  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “回来啦! 怎么样? 第一天上班感受多吧.” 大鸟关关心的问道.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “感受真是多哦!!!” 小菜一脸的不屑.">
<meta property="og:updated_time" content="2017-08-13T02:11:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="11. 无数人难办事? - 迪米特法则(LoD)">
<meta name="twitter:description" content="11.1 第一天上班 时间: 4月2日19点 &amp;nbsp; 地点: 小菜大鸟住所的客厅 &amp;nbsp; 任务: 小菜, 大鸟  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “回来啦! 怎么样? 第一天上班感受多吧.” 大鸟关关心的问道.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; “感受真是多哦!!!” 小菜一脸的不屑.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/08/13/design_pattern_fresher/law-of-Demeter/"/>





  <title> 11. 无数人难办事? - 迪米特法则(LoD) | Congspark </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bce8cb320afbfc1f884cd356da4e3a62";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Congspark</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">from journeyman to master</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/13/design_pattern_fresher/law-of-Demeter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shao Cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Congspark">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                11. 无数人难办事? - 迪米特法则(LoD)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-13T10:07:17+08:00">
                2017-08-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index">
                    <span itemprop="name">Design Pattern</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/fresher/" itemprop="url" rel="index">
                    <span itemprop="name">fresher</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/08/13/design_pattern_fresher/law-of-Demeter/" class="leancloud_visitors" data-flag-title="11. 无数人难办事? - 迪米特法则(LoD)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="11-1-第一天上班"><a href="#11-1-第一天上班" class="headerlink" title="11.1 第一天上班"></a>11.1 第一天上班</h3><ul>
<li>时间: 4月2日19点 &nbsp; 地点: 小菜大鸟住所的客厅 &nbsp; 任务: 小菜, 大鸟</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp; “回来啦! 怎么样? 第一天上班感受多吧.” 大鸟关关心的问道.<br>&nbsp;&nbsp;&nbsp;&nbsp; “感受真是多哦!!!” 小菜一脸的不屑.<br><a id="more"></a><br>&nbsp;&nbsp;&nbsp;&nbsp; “怎么了? 受委屈了吗? 说说看怎么回事.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “委屈谈不上, 就感觉公司氛围不是很好. 我一大早就到了他们公司, 正好我的主管出去办事了, 人事处的小杨让我填了表后, 就带我到 IT 部门领取电脑, 他向我介绍了一个叫 ‘小张’ 的同事认识, 说我跟他去办领取电脑的手续就可以了. 小张倒是蛮客气, 正打算要装电脑的时候, 来了个电话, 叫他马上去一个客户那里处理 pc 故障, 他说要我等等, 回来帮我弄. 我坐了一个上午, 都没有见他回来, 但我发现 IT 部门其实还有两个人, 他们都在电脑前, 一个忙于 qq, 一个好像在看新闻. 我去问人事处的小杨, 可不可以请其他人帮我办理领取手续, 他说他现在也在忙, 让我自己去找一下 IT 部门的小李, 他或许有空. 我又返回 IT 部办公室, 请小莉帮忙, 小李忙着回了两个 qq 后, 才接过我领取电脑的单子, 看到上面写着 ‘张繁忙’ 负责电脑领取安装工作, 于是说这个事是小张负责, 他不管, 叫我还是等小张回来再说吧. 我就这样又像皮球一样被踢到桌边继续等待, 还好我带着一本&lt;&lt;重构&gt;&gt;在看, 不然真要郁闷死. 小张快到下班的时候才会来, 开始帮我装系统, 加域, 设置密码等, 其实也就是 Ghost 恢复在设置一下, 差不多半个小时就弄好了.” 小菜感叹的说到, “就这样, 我这人生一个最重要的第一次就这么度过了.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “哈哈, 就业, 结婚, 生子, 人生三大事, 你这第一大事的开头是够郁闷的.” 大鸟同情的说到, “不过现实社会就是这样的, 他们又不认识你, 不给你面子, 也是很正常的. 上班可不是上学, 复杂着呢. 罢了罢了, 谁叫你预期不好, 你的主管在公司, 事情就会好办多了.”</p>
<h3 id="11-2-无熟人难办事"><a href="#11-2-无熟人难办事" class="headerlink" title="11.2 无熟人难办事"></a>11.2 无熟人难办事</h3><p>&nbsp;&nbsp;&nbsp;&nbsp; “不过, 这家公司让你感觉不好原因在于管理上存在一些问题.” 大鸟接着说, “这倒是让我想起来我们设计模式的一个原则, 你的这个经历完全可以体现在这个原则的观点.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “哦, 是什么原则?” 小菜的情绪被调动起来, “你怎么什么事情都可以和软件设计模式搭界呢?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “大鸟我显然不是吹出来的….” 大鸟得意洋洋说道.<br>&nbsp;&nbsp;&nbsp;&nbsp; “啧啧, 行了行了, 大鸟你强!!! 不是吹的, 是天生的! 快点说说, 什么原则? “ 小菜对打鸟的吹鸟腔颇为不满, 希望快些进入正题.<br>&nbsp;&nbsp;&nbsp;&nbsp; “你到了公司, 通过人事处小杨, 认识了 IT 部的小张, 这是, 你已经认识了两个人. 但因没人介绍你并不认识 IT 部小李. 既然小张小李都属于 IT 部门, 本应该都可以给你装系统配置账号的, 但却因小张有事, 而你又不让认识小李, 而造成你的人生第一次大大损失, 你说我分析的对吧?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “你这都是废话, 都是我告诉你的事情, 哪有什么分析.” 小菜失望到.<br>&nbsp;&nbsp;&nbsp;&nbsp; “如果你同时认识小张和小李, 那么任何一人有空都可以帮你搞定了, 你说对吧.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “还是废话”<br>&nbsp;&nbsp;&nbsp;&nbsp; “这就说明, 你得把人际关系搞好, 所谓 ‘无熟人难办事’, 如果你在 IT 部 ‘有人’, 不就万事不愁了吗?” 大鸟一脸坏笑.<br>&nbsp;&nbsp;&nbsp;&nbsp; “大鸟, 你到底想说什么? 我要是有关系, 对公司所有人都熟悉, 还用的着你说呀.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “小菜, 瞧你急的, 其实我想说的是, 如果 IT 部门有一个主管, 负责分配任务, 不管任何需要 IT 部配合的工作都让主管安排, 不就没有问题了吗?” 大鸟开始正经起来.<br>&nbsp;&nbsp;&nbsp;&nbsp; “你的意思是说, 如果小杨找到的是 IT 部门的主管, 那么就算是小张没空, 还是可以通过主管安排小李去做, 是吗?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “对头” 大鸟笑着鼓励到.<br>&nbsp;&nbsp;&nbsp;&nbsp; “我明白了, 关键在于公司里可能没有 IT主管, 他们都是找到谁, 就请谁去工作, 如果都熟悉, 有事情可以协调着办, 如果不熟悉, 那么就会出现我碰到的情况了, 有人忙死, 有人闲着, 而我在等待.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “没有管理, 单看人际关系协调是很难办成事儿. 如果公司 IT 部就一个小张, 那什么问题也没有, 只不过是效率低些. 后来再来个小李, 那工作叫谁去做呢? 外人又不知道他们两个人谁忙谁闲的, 于是抱怨, 推诿, 批评就随风而至. 要是三个人IT 部门还没有了管理人员, 则更加麻烦. 正虽未一个和尚挑水吃, 两个和尚抬水吃, 三个和尚没水吃.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “看来哪怕两个人, 也应该有管理才好. 我知道你的意思了, 不过这是啥管理问题, 和设计模式有关系吗?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “急什么, 还没讲完呢? 就算有 IT主管, 如果主管正好不在办公室怎么办呢? 公司几十号人用电脑, 时时刻刻都有可能出故障, 电话过来找主管, 人不在, 难道就不解决问题了?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “这个, 看来需要规章制度, 不管主管在不在, 谁有空谁先去处理, 过后汇报给主管, 再来进行工作协调.” 小菜也学着分析起来.<br>&nbsp;&nbsp;&nbsp;&nbsp; “是呀, 就像有人在路上被车撞了, 东到医院, 难道还要问清除有没有钱才给治疗吗? ‘人命大于天’ 呀, 同样的, 在现在的高科技企业, 特别是软件公司, ‘电脑命大于天’, 开发人员工资平局算下来每天是按数百计的, 耽误一天天半天, 实在是公司的大损失呀—所以你想过应该怎么办没有?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “我觉的, 不管认不认识 IT 部的人, 我只要电话或亲自找到 IT 部, 他们都应该想办法帮我解决问题.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “好, 说的没错, 那你打电话时, 怎么说呢? 是说 ‘经理在吗?….小张在吗?…..’ , 还是 ‘IT部’ 是吧, 我是小菜, 电脑已坏, 再不修理, 软件歇菜.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “哼, 你这家话, 就会拿我开心! 当然是问 IT 部门比问具体某个人来的更好!”<br>&nbsp;&nbsp;&nbsp;&nbsp; “这样子一来, 不管公司任何人, 找 IT 部门就可以了, 无论人不认识人, 反正他们会想办法找人来解决.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “哦, 明白了, 我真的明白了. 你的意思是说, IT 部门代表是抽象类或接口, 小张小李代表是具体的类, 之前你在分析会修电脑不会修收音机里讲得依赖倒转原则, 及面向接口编程, 不要面向实现编程及是这个意思?” 小菜突然有顿悟的感觉, 兴奋异常.</p>
<h3 id="11-3-迪米特法则-Law-of-Demeter-Least-KnowLedge-Principle"><a href="#11-3-迪米特法则-Law-of-Demeter-Least-KnowLedge-Principle" class="headerlink" title="11.3 迪米特法则(Law of Demeter/ Least KnowLedge Principle)"></a>11.3 迪米特法则(Law of Demeter/ Least KnowLedge Principle)</h3><p>&nbsp;&nbsp;&nbsp;&nbsp; “当然, 这个原则也是满足的, 不过我今天想讲的是一个设计原则: <strong>迪米特法则(LoD), 也叫最少只是原则[J&amp;DP].</strong>“</p>
<blockquote>
<p><strong>迪米特法则(LoD):</strong> 如果两个类不必直接通信, 那么这两个类就不应当发生直接的相互作用. 如果其中一个类需要调用另一个类的某一个方法的话, 可以通过第三者转发这个调用.[J&amp;DP].</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp; “迪米特法则首先强调的前提是在<strong>类的结构设计上, 每一个类都应当尽量降低成员的访问权限[J&amp;DP],</strong> 也就是说, 一个类把装好自己的 private 状态, 不需要让别的类知道的字段或行为就不要公开.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “哦, 是的, 需要公开的字段, 通常就送属性来体现了. 这不是封装的思想吗?”<br>&nbsp;&nbsp;&nbsp;&nbsp; “当然, 面向对象的设计原则和面向对象的三大特性本就是不矛盾的. <strong>迪米特法则的根本思想, 是强调了类之间的松耦合</strong>, 及那你今天碰到的这件事来做例子, 你第一天去公司, 怎么会认识 IT 部的人呢, 如果公司有很好的管理, 那么应该是认识的小杨打电话到 IT 部门, 告诉主管安排人给小菜你装电脑, 就算是开始时小张负责, 里临时有急事, 主管也可以在安排小李来处理. 同样道理, 我们在程序设计时, <strong>类之间的耦合越弱, 越有利于复用, 一个处在弱耦合的类被修改, 不会对有关系类造成波及.</strong> 也就是说, 信息的隐藏促进了软件的复用.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “明白, 由于 IT 部是抽象的, 哪怕里面的人都离职换了新人, 我的电脑出问题也还是可以找 IT 部门解决, 而不需要认识其中的同事, 纯靠关系帮忙了. 就算需要认识, 我也只需要认识 IT 部门的主管就可以了, 由他来安排工作.”<br>&nbsp;&nbsp;&nbsp;&nbsp; “小菜动机不纯吗! 你不会是希望那个没帮你做事的小李快些被炒鱿鱼吧?哈!” 大鸟瞧着小菜笑道.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>~感谢捧场，您的支持将鼓励我继续创作~</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.png" alt="Shao Cheng WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay.jpeg" alt="Shao Cheng Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Design-Pattern/" rel="tag"># Design Pattern</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/08/12/design_pattern_fresher/template-method-fresher/" rel="next" title="10.考题抄错会做也白搭 - 模板方法模式(Template Method)">
                <i class="fa fa-chevron-left"></i> 10.考题抄错会做也白搭 - 模板方法模式(Template Method)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/08/13/design_pattern_fresher/facade-fresher/" rel="prev" title="12.牛市股票还亏钱? - 外观模式(Facade Pattern)">
                12.牛市股票还亏钱? - 外观模式(Facade Pattern) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Shao Cheng" />
          <p class="site-author-name" itemprop="name">Shao Cheng</p>
           
              <p class="site-description motion-element" itemprop="description">Talk less, Think more</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">54</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-1-第一天上班"><span class="nav-number">1.</span> <span class="nav-text">11.1 第一天上班</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-2-无熟人难办事"><span class="nav-number">2.</span> <span class="nav-text">11.2 无熟人难办事</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-3-迪米特法则-Law-of-Demeter-Least-KnowLedge-Principle"><span class="nav-number">3.</span> <span class="nav-text">11.3 迪米特法则(Law of Demeter/ Least KnowLedge Principle)</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shao Cheng</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("IVOziuThoLlJneucTgk2EdIh-gzGzoHsz", "4LA70tV2pHILaxLV1M3ja9Sl");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

</body>
</html>
